<!doctype html>
<html>
<head>
    <title>Tutorial 1: Getting Started</title>
    
    <script src='cytoscape.umd.js'></script>
</head>

<style>
  #cy {
      width: 100%;
      height: 80%;
      position: absolute;
      top: 100px;
      left: 0px;
  }
</style>

<body>
    <button id="circle" type="button" onclick="circleLayout()">Circle</button>
    <button id="tree" type="button" onclick="treeLayout()">Tree</button>
    <button id="random" type="button" onclick="randLayout()">Random</button>
    <hr>
    <button type="button" onclick="addNode()">Add a Node</button>
    <input type="text" id="name" placeholder="name"></input>
    <input type="text" id="parent" placeholder="parent"></input>
    <hr>
    <div><div id="cy"></div></div>
  
  
</body>

<script>
  var cy = cytoscape({
    container: document.getElementById('cy'),
    elements: [
      // nodes
      { data: { id: 'a' } },
      { data: { id: 'b' } },
      { data: { id: 'c' } },
      { data: { id: 'd' } },
      { data: { id: 'e' } },
      { data: { id: 'f' } },
      // edges
      {
        data: {
          id: 'ab',
          source: 'a',
          target: 'b'
        }
      },
      {
        data: {
          id: 'cd',
          source: 'c',
          target: 'd'
        }
      },
      {
        data: {
          id: 'ef',
          source: 'e',
          target: 'f'
        }
      },
      {
        data: {
          id: 'ac',
          source: 'a',
          target: 'c'
        }
      },
      {
        data: {
          id: 'be',
          source: 'b',
          target: 'e'
        }
      }
    ],
    layout: {
      name: 'grid'
    },
    style: [
    {
        selector: 'node',
        style: {
            shape: 'hexagon',
            'background-color': 'red',
            label: 'data(id)',
            
        }
    },
    
    ]        
  });

  for (var i = 0; i < 10; i++) {
    cy.add({
        data: { id: 'node' + i }
        }
    );
    var source = 'node' + i;
    cy.add({
        data: {
            id: 'edge' + i,
            source: source,
            target: (i % 2 == 0 ? 'a' : 'b'),
            arrow: 'triangle'
        }
    });
  }

  function treeLayout() {
    console.log("CLICK");
    cy.layout({
      name: 'breadthfirst'
    }).run();
  }
  function circleLayout() {
    console.log("CLICK");
    cy.layout({
      name: 'circle'
    }).run();
  }
  function randLayout() {
    console.log("CLICK");
    cy.layout({
      name: 'random'
    }).run();
  }

  function addNode() {
    var name = document.getElementById("name").value;
    var parent = document.getElementById("parent").value;

    if(name !== ""){
      cy.add({
        data: { id: name }
      })
      if(parent != "") {
        cy.add({
          data: {
            id: parent + name,
            source: parent,
            target: name,
            arrow: 'triangle'
          }
        })
      }
    }
  }
  
  console.log(cy.json());
</script>
</html>